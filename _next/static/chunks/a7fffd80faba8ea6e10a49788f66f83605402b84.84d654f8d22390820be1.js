(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{"+6zX":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("1OyB"),a=n("vuIU"),s=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"needsCheckForDuplicates",value:function(t){if("snapshot_id"in t)try{if("v1"===localStorage.getItem(t.snapshot_id))return!1}catch(e){return!0}return!0}},{key:"storePlaylistWithoutDuplicates",value:function(t){if("snapshot_id"in t)try{localStorage.setItem(t.snapshot_id,"v1")}catch(e){}}}]),t}()},"3k8n":function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var r=n("QILm"),a=n.n(r),s=n("cDf5"),i=n.n(s),c=n("lSNA"),o=n.n(c),u=n("q1tI"),l=n.n(u),p=n("vM4K"),f=n.n(p),d=n("QSL9"),m=n("3Ddu");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){if(!t)return!1;var n=t.props?t.props.children:t.children;return e?n.length>0:!!n}function b(t){return t?t&&t.children?t.children:t.props&&t.props.children:[]}function g(t){return Array.isArray(t)?t:[t]}function x(t,e,n,r,a){if(""===e)return[];var s=r.transKeepBasicHtmlNodesFor||[],c=e&&new RegExp(s.join("|")).test(e);if(!t&&!c)return[e];var o={};!function t(e){g(e).forEach((function(e){"string"!==typeof e&&(v(e)?t(b(e)):"object"!==i()(e)||l.a.isValidElement(e)||Object.assign(o,e))}))}(t);var u=n.services.interpolator.interpolate(e,y({},o,{},a),n.language),p=f.a.parse("<0>".concat(u,"</0>"));function d(t,e,n){var r=b(t),a=h(r,e.children,n);return function(t){return"[object Array]"===Object.prototype.toString.call(t)&&t.every((function(t){return l.a.isValidElement(t)}))}(r)&&0===a.length?r:a}function m(t,e,n,r){t.dummy&&(t.children=e),n.push(l.a.cloneElement(t,y({},t.props,{key:r}),e))}function h(e,n,a){var o=g(e);return g(n).reduce((function(e,n,u){var p=n.children&&n.children[0]&&n.children[0].content;if("tag"===n.type){var f=o[parseInt(n.name,10)];!f&&1===a.length&&a[0][n.name]&&(f=a[0][n.name]),f||(f={});var b=0!==Object.keys(n.attrs).length?function(t,e){var n=y({},e);return n.props=Object.assign(t.props,e.props),n}({props:n.attrs},f):f,g=l.a.isValidElement(b),x=g&&v(n,!0)&&!n.voidElement,j=c&&"object"===i()(b)&&b.dummy&&!g,k="object"===i()(t)&&null!==t&&Object.hasOwnProperty.call(t,n.name);if("string"===typeof b)e.push(b);else if(v(b)||x){m(b,d(b,n,a),e,u)}else if(j){var O=h(o,n.children,a);e.push(l.a.cloneElement(b,y({},b.props,{key:u}),O))}else if(Number.isNaN(parseFloat(n.name))){if(k)m(b,d(b,n,a),e,u);else if(r.transSupportBasicHtmlNodes&&s.indexOf(n.name)>-1)if(n.voidElement)e.push(l.a.createElement(n.name,{key:"".concat(n.name,"-").concat(u)}));else{var w=h(o,n.children,a);e.push(l.a.createElement(n.name,{key:"".concat(n.name,"-").concat(u)},w))}else if(n.voidElement)e.push("<".concat(n.name," />"));else{var N=h(o,n.children,a);e.push("<".concat(n.name,">").concat(N,"</").concat(n.name,">"))}}else if("object"!==i()(b)||g)1===n.children.length&&p?e.push(l.a.cloneElement(b,y({},b.props,{key:u}),p)):e.push(l.a.cloneElement(b,y({},b.props,{key:u})));else{var S=n.children[0]?p:null;S&&e.push(S)}}else"text"===n.type&&e.push(n.content);return e}),[])}return b(h([{dummy:!0,children:t}],p,g(t||[]))[0])}function j(t){var e=t.children,n=t.count,r=t.parent,s=t.i18nKey,c=t.tOptions,o=t.values,p=t.defaults,f=t.components,h=t.ns,v=t.i18n,b=t.t,j=a()(t,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"]),k=Object(u.useContext)(d.a)||{},O=k.i18n,w=k.defaultNS,N=v||O||Object(d.d)();if(!N)return Object(m.d)("You will need pass in an i18next instance by using i18nextReactModule"),e;var S=b||N.t.bind(N)||function(t){return t},P=y({},Object(d.c)(),{},N.options&&N.options.react),E=h||S.ns||w||N.options&&N.options.defaultNS;E="string"===typeof E?[E]:E||["translation"];var T=p||function t(e,n){if(!e)return"";var r="",s=g(e),c=n.transKeepBasicHtmlNodesFor||[];return s.forEach((function(e,s){if("string"===typeof e)r+="".concat(e);else if(l.a.isValidElement(e)){var o=Object.keys(e.props).length,u=c.indexOf(e.type)>-1,p=e.props.children;if(!p&&u&&0===o)r+="<".concat(e.type,"/>");else if(p||u&&0===o)if(e.props.i18nIsDynamicList)r+="<".concat(s,"></").concat(s,">");else if(u&&1===o&&"string"===typeof p)r+="<".concat(e.type,">").concat(p,"</").concat(e.type,">");else{var f=t(p,n);r+="<".concat(s,">").concat(f,"</").concat(s,">")}else r+="<".concat(s,"></").concat(s,">")}else if("object"===i()(e)){var d=e.format,h=a()(e,["format"]),y=Object.keys(h);if(1===y.length){var v=d?"".concat(y[0],", ").concat(d):y[0];r+="{{".concat(v,"}}")}else Object(m.c)("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else Object(m.c)("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),r}(e,P)||P.transEmptyNodeValue||s,D=P.hashTransKey,_=s||(D?D(T):T),I=y({},c,{count:n},o,{},o?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},{defaultValue:T,ns:E}),A=x(f||e,_?S(_,I):T,N,P,I),M=void 0!==r?r:P.defaultTransParent;return M?l.a.createElement(M,j,A):A}},"6iOu":function(t,e,n){"use strict";var r=n("MX0m"),a=n.n(r),s=n("q1tI"),i=n.n(s).a.createElement;e.a=function(t){return i("div",{className:"jsx-415612420 panel"},i("div",{className:"jsx-415612420 panel-body"},t.children),i(a.a,{id:"415612420"},[".panel.jsx-415612420{margin-bottom:20px;border:1px solid var(--accent-color);border-radius:4px;}",".panel-body.jsx-415612420{padding:15px;}"]))}},"8OQS":function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}},FDXN:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("o0o1"),a=n.n(r),s=n("HaE+"),i=n("O7Jr"),c=function(){var t=Object(s.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.a)(e,e.getUserPlaylists(n,{limit:50}));case 2:return r=t.sent,t.abrupt("return",r.reduce((function(t,e){return t.concat(e.items.filter((function(t){return t&&t.owner.id===n})))}),[]));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},"HaE+":function(t,e,n){"use strict";function r(t,e,n,r,a,s,i){try{var c=t[s](i),o=c.value}catch(u){return void n(u)}c.done?e(o):Promise.resolve(o).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,s){var i=t.apply(e,n);function c(t){r(i,a,s,c,o,"next",t)}function o(t){r(i,a,s,c,o,"throw",t)}c(void 0)}))}}n.d(e,"a",(function(){return a}))},KQm4:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return a}))},O7Jr:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("o0o1"),a=n.n(r),s=n("HaE+");function i(t){return-1!==t.indexOf("?")?t.substr(0,t.indexOf("?")):t}function c(t,e,n,r){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(a.a.mark((function t(e,n,r,s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getGeneric("".concat(i(n),"?offset=").concat(r,"&limit=").concat(s)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t,e,n,r){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark((function t(e,n,r,s){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c(e,n,r,s);case 3:i=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),i={items:new Array(s).fill(null)};case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function p(t,e){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(a.a.mark((function t(e,n){var r,s,i,c,o,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:if(null!==(r=t.sent)){t.next=5;break}return t.abrupt("return",[]);case 5:if(s=r.limit,i=r.total,c=r.offset,o=r.href,0!==i){t.next=8;break}return t.abrupt("return",Promise.resolve([]));case 8:return l=new Array(Math.ceil((i-s-c)/s)).fill("").reduce((function(t,n,r){return t.push((function(){return u(e,o,s+c+r*s,s)})),t}),[function(){return n}]),t.abrupt("return",l.reduce((function(t,e){return t.then((function(t){return e().then(Array.prototype.concat.bind(t)).catch((function(t){console.error("There was an error reducing promises",t)}))})).catch((function(t){console.error("There was an error reducing promises - general catch",t)}))}),Promise.resolve([])));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},QEeW:function(t,e){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},QILm:function(t,e,n){var r=n("8OQS");t.exports=function(t,e){if(null==t)return{};var n,a,s=r(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}},VR2L:function(t,e,n){"use strict";var r=n("MX0m"),a=n.n(r),s=n("q1tI"),i=n.n(s).a.createElement;e.a=function(t){return i("span",{className:"jsx-902525602"},t.children,i(a.a,{id:"902525602"},["span.jsx-902525602{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;background-color:#999;border-radius:10px;margin-right:0.5em;}"]))}},XYOB:function(t,e){function n(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(t){var e=[];for(var n in t)e.push(n+'="'+t[n]+'"');return e.length?" "+e.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(n,"")+"</"+e.name+">"}}t.exports=function(t){return t.reduce((function(t,e){return t+n("",e)}),"")}},Zqry:function(t,e,n){"use strict";(function(t){var r=n("MX0m"),a=n.n(r),s=n("q1tI"),i=n.n(s),c=n("9Koi"),o=i.a.createElement;e.a=function(){var e=Object(c.a)(),n=e.t;e.i18n;return o("div",{style:{paddingTop:"1em"},className:"jsx-1772495215"},o("a",{target:"_blank",href:"https://www.buymeacoffee.com/jmp",onClick:function(){t.fbq&&t.fbq("track","InitiateCheckout"),t.ga&&t.ga("send","event","spotify-dedup","bmc-clicked")},className:"jsx-1772495215 bmc-button"},o("img",{src:"https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg",width:"25",height:"35",alt:"",className:"jsx-1772495215"}),o("span",{style:{marginLeft:"5px"},className:"jsx-1772495215"},n("bmc.button"))),o(a.a,{id:"1772495215"},[".bmc-button.jsx-1772495215{line-height:36px;height:37px;-webkit-text-decoration:none;text-decoration:none;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:#fff;background-color:#ff813f;border-radius:3px;border:1px solid transparent;padding:0 9px;}"]))}}).call(this,n("yLpj"))},cDf5:function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},"d2/T":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("J4zp"),a=n.n(r),s=n("QILm"),i=n.n(s),c=n("9Koi");function o(t){var e=t.ns,n=t.children,r=i()(t,["ns","children"]),s=Object(c.a)(e,r),o=a()(s,3),u=o[0],l=o[1],p=o[2];return n(u,{i18n:l,lng:l.language},p)}},h1zM:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return D})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return A}));var r=n("o0o1"),a=n.n(r),s=n("KQm4"),i=n("HaE+"),c=n("1OyB"),o=n("vuIU"),u=n("JX7q"),l=n("Ji7U"),p=n("md7G"),f=n("foSv"),d=n("rePB"),m=n("MX0m"),h=n.n(m),y=n("q1tI"),v=n.n(y),b=n("9Koi"),g=n("3k8n"),x=n("d2/T"),j=n("kbSg"),k=n("uu8g"),O=n("VR2L"),w=n("Zqry"),N=n("6iOu"),S=v.a.createElement;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var D=function(t){var e=t.children;return S("ul",{className:"jsx-1027829577"},e,S(h.a,{id:"1027829577"},["ul.jsx-1027829577{padding:0;}"]))},_=function(t){var e=t.reason,n=t.trackName,r=t.trackArtistName,a=Object(b.a)(),s=a.t;a.i18n;return S("li",{className:"jsx-521931619"},"same-id"===e&&S(O.a,null,s("result.duplicate.reason-same-id")),"same-name-artist"===e&&S(O.a,null,s("result.duplicate.reason-same-data")),S(g.a,{i18nKey:"result.duplicate.track"},S("span",{className:"jsx-521931619"},{trackName:n})," ",S("span",{className:"jsx-521931619 gray"},"by")," ",S("span",{className:"jsx-521931619"},{trackArtistName:r})),S(h.a,{id:"521931619"},[".gray.jsx-521931619{color:#999;}"]))},I=function(t){var e=t.toProcess,n=Object(b.a)().t;return S("span",{className:"jsx-462225262"},S("h3",{className:"jsx-462225262"},n(e>0||null===e?"process.status.finding":"process.status.complete")),S(h.a,{id:"462225262"},["h3.jsx-462225262{font-size:24px;}"]))},A=function(e){Object(l.a)(r,e);var n=T(r);function r(){var e;Object(c.a)(this,r);for(var o=arguments.length,l=new Array(o),p=0;p<o;p++)l[p]=arguments[p];return e=n.call.apply(n,[this].concat(l)),Object(d.a)(Object(u.a)(e),"state",{toProcess:null,playlists:[],savedTracks:{status:null,duplicates:[]}}),Object(d.a)(Object(u.a)(e),"removeDuplicates",(function(n){Object(i.a)(a.a.mark((function r(){var i,c,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.state.playlists.findIndex((function(t){return t.playlist.id===n.playlist.id})),"starred"===(c=e.state.playlists[i]).playlist.id&&t.alert&&t.alert("It is not possible to delete duplicates from your Starred playlist using this tool since this is not supported in the Spotify Web API. You will need to remove these manually."),!c.playlist.collaborative){r.next=7;break}t.alert&&t.alert("It is not possible to delete duplicates from a collaborative playlist using this tool since this is not supported in the Spotify Web API. You will need to remove these manually."),r.next=21;break;case 7:return r.prev=7,r.next=10,k.a.removeDuplicates(e.props.api,c);case 10:(o=Object(s.a)(e.state.playlists))[i].duplicates=[],o[i].status="process.items.removed",console.log("Main > removeDuplicates > updating state"),e.setState(E(E({},e.state),{},{playlists:Object(s.a)(o)})),t.ga&&t.ga("send","event","spotify-dedup","playlist-removed-duplicates"),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(7),t.Raven&&t.Raven.captureMessage("Exception trying to remove duplicates from playlist",{extra:{duplicates:c.duplicates}});case 21:case"end":return r.stop()}}),r,null,[[7,18]])})))()})),e}return Object(o.a)(r,[{key:"componentWillUnmount",value:function(){console.log("Main > componentWillUnmount")}},{key:"componentDidMount",value:function(){var t=this,e=new j.a;e.on("updateState",(function(e){console.log("Main > componentDidMount > updating state",e),t.setState(e)})),e.process(this.props.api,this.props.user)}},{key:"removeDuplicatesInSavedTracks",value:function(){var e=this;Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k.b.removeDuplicates(e.props.api,e.state.savedTracks);case 2:console.log("Main > removeDuplicatesInSavedTracks > updating state"),e.setState(E(E({},e.state),{},{savedTracks:{duplicates:[],status:"process.items.removed"}})),t.ga&&t.ga("send","event","spotify-dedup","saved-tracks-removed-duplicates");case 5:case"end":return n.stop()}}),n)})))()}},{key:"render",value:function(){var t=this,e=0===this.state.playlists.length?0:this.state.playlists.reduce((function(t,e){return t+e.duplicates.length}),0)+this.state.savedTracks.duplicates.length;return S("div",{className:"jsx-115715298"},S(I,{toProcess:this.state.toProcess}),S(N.a,null,null===this.state.toProcess&&S(x.a,null,(function(t){return t("process.reading-library")})),this.state.toProcess>0&&S(x.a,null,(function(e){return e("process.processing",{count:t.state.toProcess})})),0===this.state.toProcess&&e>0&&S("span",{className:"jsx-115715298"},S(x.a,null,(function(t){return t("process.status.complete.body")}))," ",S(x.a,null,(function(t){return S("span",{dangerouslySetInnerHTML:{__html:t("process.status.complete.dups.body",{strongOpen:"<strong>",strongClose:"</strong>"})},className:"jsx-115715298"})})),S(w.a,null)),0===this.state.toProcess&&0===e&&S("span",{className:"jsx-115715298"},S(x.a,null,(function(t){return t("process.status.complete.body")})),S("br",{className:"jsx-115715298"}),S(x.a,null,(function(t){return t("process.status.complete.nodups.body")})),S(w.a,null))),S("ul",{className:"jsx-115715298 playlists-list"},(this.state.savedTracks.duplicates.length||this.state.savedTracks.status)&&S("li",{className:"jsx-115715298 playlists-list-item media"},S("div",{className:"jsx-115715298 img"},S("img",{width:"100",height:"100",src:"./placeholder.png",className:"jsx-115715298 playlists-list-item__img"})),S("div",{className:"jsx-115715298 bd"},S("span",{className:"jsx-115715298 playlists-list-item__name"},S(x.a,null,(function(t){return t("process.saved.title")}))),this.state.savedTracks.status&&S(O.a,null,S(x.a,null,(function(e){return e(t.state.savedTracks.status)}))),0!=this.state.savedTracks.duplicates.length&&S("span",{className:"jsx-115715298"},S("span",{className:"jsx-115715298"},S(x.a,null,(function(e){return e("process.saved.duplicates",{count:t.state.savedTracks.duplicates.length})}))),S("button",{onClick:function(){return t.removeDuplicatesInSavedTracks()},className:"jsx-115715298 btn btn-primary btn-sm playlist-list-item__btn"},S(x.a,null,(function(t){return t("process.saved.remove-button")}))),S(D,null,this.state.savedTracks.duplicates.map((function(t,e){return S(_,{key:e,reason:t.reason,trackName:t.track.name,trackArtistName:t.track.artists[0].name})})))))),this.state.playlists.filter((function(t){return t.duplicates.length||""!=t.status})).map((function(e,n){return S("li",{key:n,className:"jsx-115715298 playlists-list-item media"},S("div",{className:"jsx-115715298 img"},S("img",{width:"100",height:"100",src:e.playlist.images&&e.playlist.images[0]&&e.playlist.images[0].url,className:"jsx-115715298 playlists-list-item__img"})),S("div",{className:"jsx-115715298 bd"},S("span",{className:"jsx-115715298 playlists-list-item__name"},e.playlist.name),e.status&&S(O.a,null,S(x.a,null,(function(t){return t(e.status)}))),0!=e.duplicates.length&&S("span",{className:"jsx-115715298"},S("span",{className:"jsx-115715298"},S(x.a,null,(function(t){return t("process.playlist.duplicates",{count:e.duplicates.length})}))),S("button",{onClick:function(){return t.removeDuplicates(e)},className:"jsx-115715298 btn btn-primary btn-sm playlist-list-item__btn"},S(x.a,null,(function(t){return t("process.playlist.remove-button")}))),S(D,null,e.duplicates.map((function(t,e){return S(_,{key:e,reason:t.reason,trackName:t.track.name,trackArtistName:t.track.artists[0].name})}))))))}))),S(h.a,{id:"115715298"},[".bd.jsx-115715298{position:relative;}",".media.jsx-115715298,.bd.jsx-115715298{overflow:hidden;_overflow:visible;zoom:1;}",".media.jsx-115715298 .img.jsx-115715298{float:left;margin-right:20px;}","img.jsx-115715298{vertical-align:middle;}",".playlists-list-item.jsx-115715298{margin-bottom:2rem;}",".playlists-list-item__img.jsx-115715298{width:100px;}",".btn.jsx-115715298{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.428571429;text-align:center;white-space:nowrap;vertical-align:middle;background-image:none;border:1px solid transparent;border-radius:4px;cursor:pointer;}",".btn-primary.jsx-115715298{color:#fff;background-color:#428bca;border-color:#357ebd;}",".btn-primary.jsx-115715298:hover{background-color:#5094ce;}",".playlist-list-item__btn.jsx-115715298{max-width:50%;position:absolute;right:0;top:0;}","@media (max-width:700px){.playlist-list-item__btn.jsx-115715298{position:relative;max-width:100%;}}",".playlists-list-item__name.jsx-115715298{display:block;font-weight:bold;max-width:50%;}","ul.jsx-115715298{padding:0;}"]))}}]),r}(v.a.Component)}).call(this,n("yLpj"))},hh3C:function(t,e,n){var r=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,a=n("xOyo"),s=Object.create?Object.create(null):{};function i(t,e,n,r,a){var s=e.indexOf("<",r),i=e.slice(r,-1===s?void 0:s);/^\s*$/.test(i)&&(i=" "),(!a&&s>-1&&n+t.length>=0||" "!==i)&&t.push({type:"text",content:i})}t.exports=function(t,e){e||(e={}),e.components||(e.components=s);var n,c=[],o=-1,u=[],l={},p=!1;return t.replace(r,(function(r,s){if(p){if(r!=="</"+n.name+">")return;p=!1}var f,d="/"!==r.charAt(1),m=0===r.indexOf("\x3c!--"),h=s+r.length,y=t.charAt(h);d&&!m&&(o++,"tag"===(n=a(r)).type&&e.components[n.name]&&(n.type="component",p=!0),n.voidElement||p||!y||"<"===y||i(n.children,t,o,h,e.ignoreWhitespace),l[n.tagName]=n,0===o&&c.push(n),(f=u[o-1])&&f.children.push(n),u[o]=n),(m||!d||n.voidElement)&&(m||o--,!p&&"<"!==y&&y&&i(f=-1===o?c:u[o].children,t,o,h,e.ignoreWhitespace))})),!c.length&&t.length&&i(c,t,0,0,e.ignoreWhitespace),c}},kbSg:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));var r=n("o0o1"),a=n.n(r),s=n("HaE+"),i=n("1OyB"),c=n("vuIU"),o=n("rePB"),u=n("FDXN"),l=n("uu8g");function p(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,s=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw s}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d=new(n("+6zX").a),m=function(t){return{playlist:t,duplicates:[],status:"",processed:!1}},h=function(){function e(){var n=this;Object(i.a)(this,e),Object(o.a)(this,"listeners",void 0),Object(o.a)(this,"process",function(){var e=Object(s.a)(a.a.mark((function e(r,s){var i,c,o,f,h,y,v,b,g,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){e.processed=!0;var n=i.toProcess-1;i.toProcess-=1,0===n&&(t.ga&&t.ga("send","event","spotify-dedup","library-processed"),t.fbq&&t.fbq("trackCustom","dedup-library-processed")),c("updateState",i)},i={},c=n.dispatch.bind(n),f=[],e.next=6,Object(u.a)(r,s.id).catch((function(e){t.ga&&t.ga("send","event","spotify-dedup","error-fetching-user-playlists"),console.error("There was an error fetching user's playlists",e)}));case 6:if(!(h=e.sent)){e.next=51;break}return f=h,i.playlists=f.map((function(t){return m(t)})),i.toProcess=i.playlists.length+1,i.savedTracks={},e.next=14,l.b.getTracks(r,r.getMySavedTracks({limit:50}));case 14:y=e.sent,i.savedTracks.duplicates=l.b.findDuplicatedTracks(y),i.savedTracks.duplicates.length&&t.ga&&t.ga("send","event","spotify-dedup","saved-tracks-found-duplicates"),i.toProcess--,n.dispatch("updateState",i),v=p(i.playlists),e.prev=20,v.s();case 22:if((b=v.n()).done){e.next=43;break}if(g=b.value,!d.needsCheckForDuplicates(g.playlist)){e.next=40;break}return e.prev=25,e.next=28,l.a.getTracks(r,g.playlist);case 28:x=e.sent,g.duplicates=l.a.findDuplicatedTracks(x),0===g.duplicates.length&&d.storePlaylistWithoutDuplicates(g.playlist),o(g),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(25),console.error("There was an error fetching tracks for playlist",g.playlist,e.t0),o(g);case 38:e.next=41;break;case 40:o(g);case 41:e.next=22;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(20),v.e(e.t1);case 48:return e.prev=48,v.f(),e.finish(48);case 51:case"end":return e.stop()}}),e,null,[[20,45,48,51],[25,34]])})));return function(t,n){return e.apply(this,arguments)}}()),this.listeners={}}return Object(c.a)(e,[{key:"on",value:function(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}},{key:"dispatch",value:function(t,e){this.listeners[t].forEach((function(t){return t(e)}))}}]),e}()}).call(this,n("yLpj"))},o0o1:function(t,e,n){t.exports=n("ls82")},uu8g:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return h}));var r=n("Ji7U"),a=n("md7G"),s=n("foSv"),i=n("o0o1"),c=n.n(i),o=n("HaE+"),u=n("1OyB"),l=n("vuIU"),p=n("O7Jr");function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var d=function(){function t(){Object(u.a)(this,t)}return Object(l.a)(t,[{key:"removeDuplicates",value:function(){var t=Object(o.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw"Not implemented";case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getTracks",value:function(){var t=Object(o.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw"Not implemented";case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}],[{key:"findDuplicatedTracks",value:function(t){var e={},n={};return t.reduce((function(t,r,a){if(null===r)return t;if(null===r.id)return t;var s=!1,i="".concat(r.name,":").concat(r.artists[0].name).toLowerCase();return r.id in e?s=!0:i in n&&0!==n[i].filter((function(t){return Math.abs(t-r.duration_ms)<2e3})).length&&(s=!0),s?t.push({index:a,track:r,reason:r.id in e?"same-id":"same-name-artist"}):(e[r.id]=!0,n[i]=n[i]||[],n[i].push(r.duration_ms)),t}),[])}}]),t}(),m=function(t){Object(r.a)(n,t);var e=f(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,null,[{key:"getTracks",value:function(){var t=Object(o.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var a=[];Object(p.a)(e,e.getGeneric(n.tracks.href)).then((function(t){return Promise.all(t)})).then((function(e){e.forEach((function(t){t.items.forEach((function(t){a.push(t&&t.track)}))})),t(a)})).catch(r)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeDuplicates",value:function(){var t=Object(o.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){"starred"===n.playlist.id&&r("It is not possible to delete duplicates from your Starred playlist using this tool since this is not supported in the Spotify Web API. You will need to remove these manually."),n.playlist.collaborative?r("It is not possible to delete duplicates from a collaborative playlist using this tool since this is not supported in the Spotify Web API. You will need to remove these manually."):function(){var a=n.duplicates.map((function(t){return{uri:t.track.linked_from?t.track.linked_from.uri:t.track.uri,positions:[t.index]}})).reverse(),s=[];do{var i=a.splice(0,100);!function(t,e,n){s.push((function(){return n.removeTracksFromPlaylist(t.playlist.owner.id,t.playlist.id,e)}))}(n,i,e)}while(a.length>0);s.reduce((function(t,e){return t.then((function(){return e()}))}),Promise.resolve(null)).then((function(){n.duplicates=[],t()})).catch((function(t){r(t)}))}()})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(d),h=function(t){Object(r.a)(n,t);var e=f(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,null,[{key:"getTracks",value:function(){var t=Object(o.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var a=[];Object(p.a)(e,n).then((function(t){return Promise.all(t)})).then((function(e){e.forEach((function(t){t.items.forEach((function(t){a.push(t.track)}))})),t(a)})).catch((function(t){console.error("There was an error fetching the tracks from playlist ".concat(n.href),t),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeDuplicates",value:function(){var t=Object(o.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var a=n.duplicates.map((function(t){return t.track.linked_from?t.track.linked_from.id:t.track.id}));do{Object(o.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.splice(0,50),t.next=3,e.removeFromMySavedTracks(n);case 3:case"end":return t.stop()}}),t)})))()}while(a.length>0);n.duplicates=[],t()})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(d)},vM4K:function(t,e,n){t.exports={parse:n("hh3C"),stringify:n("XYOB")}},xOyo:function(t,e,n){var r=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,a=n("QEeW");t.exports=function(t){var e,n=0,s=!0,i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(r,(function(r){if("="===r)return s=!0,void n++;s?0===n?((a[r]||"/"===t.charAt(t.length-2))&&(i.voidElement=!0),i.name=r):(i.attrs[e]=r.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(i.attrs[e]=e),e=r),n++,s=!1})),i}}}]);
//# sourceMappingURL=a7fffd80faba8ea6e10a49788f66f83605402b84.84d654f8d22390820be1.js.map